"use strict";var ventes,map=L.map("map").setView([45.7,3.15],7);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(map);var communesLayer,sectionsLayer,totalVentes=0,clickedCommunes=[],select=document.getElementById("region");function filterCommunes(t,e){return e.features.filter(function(e){return e.properties.code.startsWith(t)})}function filterSections(t,e){return e.features.filter(function(e){return e.id.startsWith(t)})}select.addEventListener("change",function(){var r=this.value;map.eachLayer(function(e){map.removeLayer(e)}),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(map),fetch("https://raw.githubusercontent.com/BryanLorin/geojsonBryan/main/".concat(r,"/departements-").concat(r,".geojson")).then(function(e){return e.json()}).then(function(e){L.geoJSON(e,{onEachFeature:function(e,t){t.on("click",function(){var c=e.properties.code;fetch("https://raw.githubusercontent.com/BryanLorin/geojsonBryan/main/".concat(r,"/mutations-").concat(r,"-").concat(c,".json")).then(function(e){return e.json()}).then(function(e){ventes=e}),fetch("https://raw.githubusercontent.com/BryanLorin/geojsonBryan/main/".concat(r,"/communes-").concat(r,".geojson")).then(function(e){return e.json()}).then(function(e){var t=filterCommunes(c,e);communesLayer&&map.removeLayer(communesLayer),(communesLayer=L.geoJSON(t,{onEachFeature:function(t,o){o.on("click",function(){var n=t.properties.code,e=ventes.filter(function(e){return JSON.parse(e.l_codinsee.replace(/'/g,'"')).includes(n)});document.getElementById("Communes").checked?document.getElementById("Count").checked?(totalVentes+=e.length,document.getElementById("NumberSell").textContent="Total: "+totalVentes,o.setStyle({fillColor:"red"}),clickedCommunes.push(o)):(totalVentes=e.length,document.getElementById("NumberSell").textContent="Total: "+totalVentes):document.getElementById("Sections").checked&&fetch("https://raw.githubusercontent.com/BryanLorin/geojsonBryan/main/".concat(r,"/sections-").concat(r,"-").concat(c,".json")).then(function(e){return e.json()}).then(function(e){var t=filterSections(n,e);sectionsLayer&&map.removeLayer(sectionsLayer),(sectionsLayer=L.geoJSON(t,{onEachFeature:function(n,o){o.on("click",function(){var t=n.properties.code,e=ventes.filter(function(e){return JSON.parse(e.l_section.replace(/'/g,'"')).includes(t)});document.getElementById("Count").checked?(totalVentes+=e.length,document.getElementById("NumberSell").textContent="Total: "+totalVentes,o.setStyle({fillColor:"red"}),clickedCommunes.push(o)):(totalVentes=e.length,document.getElementById("NumberSell").textContent="Total: "+totalVentes)})}})).addTo(map)})})}})).addTo(map)})})}}).addTo(map)})}),document.getElementById("reset").addEventListener("click",function(){totalVentes=0,document.getElementById("NumberSell").textContent="",clickedCommunes.forEach(function(e){e.setStyle({fillColor:"blue"})}),clickedCommunes=[]});
//# sourceMappingURL=scriptMap.min.js.map
